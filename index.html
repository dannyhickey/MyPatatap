<!DOCTYPE html>
<html>
<head>
    <title>Danny's Patatap</title> 
<script type="text/javascript" src="paper-full.js"></script>  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/1.1.29/howler.js"></script>  
<link rel="stylesheet" href="styles.css">

<script type="text/paperscript" canvas="myCanvas">

var keys = {
  q: {
    sound: new Howl({urls: ["sounds/bubbles.mp3"]}),
    color: generateRandomColours(1)
  },
  w: {
    sound: new Howl({urls: ["sounds/clay.mp3"]}),
    color: generateRandomColours(1)
  },
  e: {
    sound: new Howl({urls: ["sounds/confetti.mp3"]}),
    color: generateRandomColours(1)
  },
  r: {
    sound: new Howl({urls: ["sounds/corona.mp3"]}),
    color: generateRandomColours(1)
  },
  t: {
    sound: new Howl({urls: ["sounds/dotted-spiral.mp3"]}),
    color: generateRandomColours(1)
  },
  y: {
    sound: new Howl({urls: ["sounds/flash-1.mp3"]}),
    color: generateRandomColours(1)
  },
  u: {
    sound: new Howl({urls: ["sounds/flash-2.mp3"]}),
    color: generateRandomColours(1)
  },
  i: {
    sound: new Howl({urls: ["sounds/flash-3.mp3"]}),
    color: generateRandomColours(1)
  },
  o: {
    sound: new Howl({urls: ["sounds/glimmer.mp3"]}),
    color: generateRandomColours(1)
  },
  p: {
    sound: new Howl({urls: ["sounds/moon.mp3"]}),
    color: generateRandomColours(1)
  },
  a: {
    sound: new Howl({urls: ["sounds/pinwheel.mp3"]}),
    color: generateRandomColours(1)
  },
  s: {
    sound: new Howl({urls: ["sounds/piston-1.mp3"]}),
    color: generateRandomColours(1)
  },
  d: {
    sound: new Howl({urls: ["sounds/piston-2.mp3"]}),
    color: generateRandomColours(1)
  },
  f: {
    sound: new Howl({urls: ["sounds/prism-1.mp3"]}),
    color: generateRandomColours(1)
  },
  g: {
    sound: new Howl({urls: ["sounds/prism-2.mp3"]}),
    color: generateRandomColours(1)
  },
  h: {
    sound: new Howl({urls: ["sounds/prism-3.mp3"]}),
    color: generateRandomColours(1)
  },
  j: {
    sound: new Howl({urls: ["sounds/splits.mp3"]}),
    color: generateRandomColours(1)
  },
  k: {
    sound: new Howl({urls: ["sounds/squiggle.mp3"]}),
    color: generateRandomColours(1)
  },
  l: {
    sound: new Howl({urls: ["sounds/strike.mp3"]}),
    color: generateRandomColours(1)
  },
  z: {
    sound: new Howl({urls: ["sounds/suspension.mp3"]}),
    color: generateRandomColours(1)
  },
  x: {
    sound: new Howl({urls: ["sounds/timer.mp3"]}),
    color: generateRandomColours(1)
  },
  c: {
    sound: new Howl({urls: ["sounds/ufo.mp3"]}),
    color: generateRandomColours(1)
  },
  v: {
    sound: new Howl({urls: ["sounds/veil.mp3"]}),
    color: generateRandomColours(1)
  },
  b: {
    sound: new Howl({urls: ["sounds/wipe.mp3"]}),
    color: generateRandomColours(1)
  },
  n: {
    sound: new Howl({urls: ["sounds/zig-zag.mp3"]}),
    color: generateRandomColours(1)
  },
  m: {
    sound: new Howl({urls: ["sounds/moon.mp3"]}),
    color: generateRandomColours(1)
  }
};
var circles = [];

  function onKeyDown(event) {
    if(keys[event.key]){    
    	var rand = Point.random();//random point between zero and one non inclusive.

    	var screenCanvas = new Point(view.size.width, view.size.height);// storing the maximum screen width and height in screenCanvas

    	var pos = screenCanvas * rand;// the pos variable stores a random generated point on the screen

      var newCircle = new Path.Circle({
          center: screenCanvas * rand,
          radius: 300,
          fillColor: keys[event.key].color
      });
      
      newCircle.fillColor = keys[event.key].color;
      keys[event.key].sound.play();
    	circles.push(newCircle);//drawing a random coloured circle at a random 'pos' on the screen.
      }
}

function onFrame(event)
{
  for(var i = 0; i < circles.length; i++)
  {
    circles[i].fillColor.hue += 1;
    circles[i].scale(.95);//scales down the circle
    if (circles[i].radius < 1) {
      circles.splice(i, 1); // removing circles from memory
    }
  }

}

function generateRandomColours(num)
{
  //make empty array
  var arr = [];
  //add "num" random colours to the array
  for (var i = 0; i < num; i++) {
    //push random colour to the array
    arr.push(randomColour());
  }
  return arr;
}

function randomColour(){
//choose a "red" from 0 to 255
var r = Math.floor(Math.random() * 256);

//choose a "green" from 0 to 255
var g = Math.floor(Math.random() * 256);

//choose a "blue" from 0 to 255
var b = Math.floor(Math.random() * 256);

//"rgb(r, g, b)"
return "rgb(" + r + ", " + g + ", " + b + ")";
}

</script> 
</head>
<body>
  <canvas id="myCanvas" resize></canvas>
</body>
</html>